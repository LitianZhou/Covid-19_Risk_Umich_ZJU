install.packages(c("dplyr", "ggplot2", "leaflet", "lubridate", "plotly"))
install.packages("tigris")
shiny::runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
options(tigris_use_cache = TRUE)
runApp()
COVID19_by_Neighborhood <- read.csv("~/Downloads/MDP_summer/COVID19_by_Neighborhood.csv")
View(COVID19_by_Neighborhood)
unique(COVID19_by_Neighborhood$COMTY_NAME)
runApp()
getwd()
runApp()
runApp()
char_zips <- zctas(cb = TRUE, starts_with = "282")
char_zips$AFFGEOID10
char_zips$GEOID10
unique(COVID19_by_Neighborhood$COMTY_NAME)
sort(unique(COVID19_by_Neighborhood$COMTY_NAME))
char_zips <- zctas(cb = TRUE, starts_with = "90")
char_zips <- zctas(cb = TRUE, starts_with = c("90","91","92"))
char_zips
irs <- read_csv("https://www.irs.gov/pub/irs-soi/16zpallnoagi.csv")
library(readr)
install.packages("readr")
library(readr)
irs <- read_csv("https://www.irs.gov/pub/irs-soi/16zpallnoagi.csv")
irs <- read_csv("https://www.irs.gov/pub/irs-soi/16zpallnoagi.csv")
irs_sub <-
irs %>%
select(zipcode,
n02650,        # Number of returns with total income
a02650) %>%    # Total income amount (thousands)
rename(returns = n02650,
income = a02650) %>%
# calculate mean income
mutate(income = income * 1000,
mean_income = income/returns) %>%
arrange(desc(mean_income)) %>%
select(zipcode, mean_income)
irs_sub
irs
irs_sub <-
irs %>%
select(ZIPCODE,
n02650,        # Number of returns with total income
a02650) %>%    # Total income amount (thousands)
rename(returns = n02650,
income = a02650) %>%
# calculate mean income
mutate(income = income * 1000,
mean_income = income/returns) %>%
arrange(desc(mean_income)) %>%
select(zipcode, mean_income)
irs_sub <-
irs %>%
select(ZIPCODE,
n02650,        # Number of returns with total income
a02650) %>%    # Total income amount (thousands)
rename(returns = N02650,
income = A02650) %>%
# calculate mean income
mutate(income = income * 1000,
mean_income = income/returns) %>%
arrange(desc(mean_income)) %>%
select(zipcode, mean_income)
irs_sub <-
irs %>%
select(ZIPCODE,
n02650,        # Number of returns with total income
a02650) %>%    # Total income amount (thousands)
rename(returns = N02650,
income = A02650) %>%
# calculate mean income
mutate(income = income * 1000,
mean_income = income/returns) %>%
arrange(desc(mean_income)) %>%
select(zipcode, mean_income)
irs_sub <-
irs %>%
select(ZIPCODE,
N02650,        # Number of returns with total income
A02650) %>%    # Total income amount (thousands)
rename(returns = N02650,
income = A02650) %>%
# calculate mean income
mutate(income = income * 1000,
mean_income = income/returns) %>%
arrange(desc(mean_income)) %>%
select(zipcode, mean_income)
irs_sub <-
irs %>%
select(ZIPCODE,
N02650,        # Number of returns with total income
A02650) %>%    # Total income amount (thousands)
rename(returns = N02650,
income = A02650) %>%
# calculate mean income
mutate(income = income * 1000,
mean_income = income/returns) %>%
arrange(desc(mean_income)) %>%
select(ZIPCODE, mean_income)
irs_sub
# join zip boundaries and income data
char_zips <- geo_join(char_zips,
irs_sub,
by_sp = "GEOID10",
by_df = "zipcode",
how = "left")
# create color palette
pal <- colorNumeric(
palette = "Greens",
domain = char_zips@data$mean_income)
char_zips@data$mean_income
# join zip boundaries and income data
char_zips <- geo_join(char_zips,
irs_sub,
by_sp = "GEOID10",
by_df = "ZIPCODE",
how = "left")
# create color palette
pal <- colorNumeric(
palette = "Greens",
domain = char_zips@data$mean_income)
char_zips
char_zips@data
head(char_zips@data)
irs_sub <-
irs %>%
select(ZIPCODE,
N02650,        # Number of returns with total income
A02650) %>%    # Total income amount (thousands)
rename(returns = N02650,
income = A02650) %>%
# calculate mean income
mutate(income = income * 1000,
mean_income = income/returns) %>%
arrange(desc(mean_income)) %>%
select(ZIPCODE, mean_income)
irs_sub$mean_income
?
geo_join
leangth(char_zips)
length(char_zips)
c(1:652)
char_zips <- geo_join(char_zips,
c(1:652),
by_sp = "GEOID10",
by_df = "ZIPCODE",
how = "left")
data.frame("zipcode"=char_zips$GEOID10,"caseCount" = c(1:652)
)
# join zip boundaries and case count
char_zips <- geo_join(char_zips,
data.frame("zipcode"=char_zips$GEOID10,"caseCount" = c(1:652)),
by_sp = "GEOID10",
by_df = "zipcode",
how = "left")
# create color palette
pal <- colorNumeric(
palette = "Greens")
# create color palette
pal <- colorNumeric(
palette = "Greens",
domain = char_zips@data$GEOID10)
# create color palette
pal <- colorNumeric(
palette = "Greens",
domain = c(1:1000))
pal
# create color palette
pal <- colorNumeric(
palette = "Greens",
domain = c(1:10000))
# join zip boundaries and case count
char_zips <- geo_join(char_zips,
data.frame("zipcode"=char_zips$GEOID10,"caseCount" = c(1:652)),
by_sp = "GEOID10",
by_df = "zipcode",
how = "left")
# create color palette
pal <- colorNumeric(
palette = "Greens",
domain = c(1:10000))
# create labels for zipcodes
labels <-
paste0(
"Zip Code: ",
char_zips@data$GEOID10, "<br/>",
"Case Count: ",
scales::dollar(char_zips@data$caseCount)) %>%
lapply(htmltools::HTML)
char_zips %>%
leaflet %>%
# add base map
addProviderTiles("CartoDB") %>%
# add zip codes
addPolygons(fillColor = ~pal(caseCount),
weight = 2,
opacity = 1,
color = "white",
dashArray = "3",
fillOpacity = 0.7,
highlight = highlightOptions(weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labels) %>%
# add legend
addLegend(pal = pal,
values = ~caseCount,
opacity = 0.7,
title = htmltools::HTML("Case Count <br>
by Zip Code"),
position = "bottomright")
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
#COVID19_by_Neighborhood <- read.csv("data/COVID19_by_Neighborhood.csv")
char_zips <- zctas(cb = TRUE, starts_with = c("90","91","92"))
#COVID19_by_Neighborhood <- read.csv("data/COVID19_by_Neighborhood.csv")
char_zips <- zctas(cb = TRUE, starts_with = c("90","91","92"))
saveRDS(char_zips)
saveRDS(char_zips, "char_zips")
#COVID19_by_Neighborhood <- read.csv("data/COVID19_by_Neighborhood.csv")
#char_zips <- zctas(cb = TRUE, starts_with = c("90","91","92"))
#saveRDS(char_zips, "char_zips")
load(char_zips)
#COVID19_by_Neighborhood <- read.csv("data/COVID19_by_Neighborhood.csv")
#char_zips <- zctas(cb = TRUE, starts_with = c("90","91","92"))
#saveRDS(char_zips, "char_zips")
load("char_zips")
#COVID19_by_Neighborhood <- read.csv("data/COVID19_by_Neighborhood.csv")
#char_zips <- zctas(cb = TRUE, starts_with = c("90","91","92"))
saveRDS(char_zips, "char_zips")
#COVID19_by_Neighborhood <- read.csv("data/COVID19_by_Neighborhood.csv")
char_zips <- zctas(cb = TRUE, starts_with = c("90","91","92"))
saveRDS(char_zips, "char_zips.rds")
char_zips <- readRDS("~/Downloads/MDP_summer/Covid-19_Risk_Umich_ZJU/char_zips.rds")
readRDS("char_zips.rds")
runApp()
runApp()
COVID19_by_Neighborhood <- read.csv("data/COVID19_by_Neighborhood.csv")
runApp()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(x=cases)
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases))
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
theme_classic()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
stat_bin(bins = 30) +
theme_classic()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
stat_bin(bins = 30) +
theme_classic()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
theme_classic()
ggplotly(
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
theme_classic()
)
runApp()
ggplotly(
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
scale_fill_brewer(palette="Dark2") +
theme_classic()
)
ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
scale_fill_brewer(palette="Dark2") +
theme_classic()
ggplotly(
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
scale_fill_brewer(palette="Blue") +
theme_classic()
)
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
scale_fill_brewer(palette="Blue") +
theme_classic()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
scale_fill_brewer(palette="Red") +
theme_classic()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases)) +
scale_fill_brewer() +
theme_classic()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases), binwidth=30) +
scale_fill_brewer() +
theme_classic()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases), binwidth=30) +
scale_fill_brewer("Spectral") +
theme_classic()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases), binwidth=30) +
scale_fill_brewer("Blues") +
theme_classic()
ggplot2::ggplot(data = COVID19_by_Neighborhood)+
geom_histogram(aes(x=cases), binwidth=30) +
scale_fill_brewer("Set1") +
theme_classic()
runApp()
runApp()
runApp()
runApp()
runApp()
runApp()
COVID19_by_Neighborhood$COMTY_NAME
char_zips$GEOID10
char_zips@data$GEOID10
char_zips$GEOID10
char_zips@data$GEOID10
shiny::runApp()
latimes.place.totals <- read.csv("~/Downloads/latimes-place-totals.csv")
View(latimes.place.totals)
latimes.place.totals <- read.csv("~/Downloads/latimes-place-totals.csv")
unique(latimes.place.totals$place)
nrow(latimes.place.totals)
nrow(latimes.place.totals)/330
unique(latimes.place.totals$fips)
latimes.place.totals$date
min(latimes.place.totals$date)
as.Date(latimes.place.totals$date)
min(as.Date(latimes.place.totals$date))
install.packages("tigris")
features <- read.csv("~/Downloads/features.csv", header=FALSE)
View(features)
features <- read.csv("~/Downloads/features.csv", header=c('new_0',
'new_1',
'new_2',
'new_3',
'new_4',
'confirmed_cases',
'population',
'people/sq. mile'))
c('new_0',
'new_1',
'new_2',
'new_3',
'new_4',
'confirmed_cases',
'population',
'people/sq. mile')
colnames(features) = c(c('new_0',
'new_1',
'new_2',
'new_3',
'new_4',
'confirmed_cases',
'population',
'people/sq. mile'))
features
View(features)
outcomes <- read.table("~/Downloads/outcomes.csv", quote="\"", comment.char="")
View(outcomes)
latimes.place.totals <- read.csv("~/Downloads/latimes-place-totals.csv")
nrow(latimes.place.totals)
latimes.place.totals %>% filter(place == "Long Beach")
latimes.place.totals %>% filter(place == "Arcadia")
View(features)
View(latimes.place.totals)
max(latimes.place.totals$confirmed_cases)
nrow
nrow(latimes.place.totals)
latimes.place.totals %>% arrange(date)
View(latimes.place.totals %>% arrange(date))
summary(latimes.place.totals$new_confirmed_cases)
library(readxl)
LA_cases_by_places <- read_excel("~/Downloads/LA_cases_by_places.xlsx")
View(LA_cases_by_places)
test1 = latimes.place.totals %>% arrange(date)
test1$place == LA_cases_by_places$place
all(test1$place == LA_cases_by_places$place)
which(test1$place == LA_cases_by_places$place)
which(test1$place != LA_cases_by_places$place)
test1$place == LA_cases_by_places$place
sum(test1$place == LA_cases_by_places$place)
length(test1)
nrow(test1)
nrow(LA_cases_by_places)
unique(test1$place)
unique(LA_cases_by_places$place)
unique(test1$place)
sort(unique(LA_cases_by_places$place))
sort(unique(test1$place))
sort(unique(LA_cases_by_places$place)) == sort(unique(test1$place))
all(sort(unique(LA_cases_by_places$place)) == sort(unique(test1$place)))
sum(sort(unique(LA_cases_by_places$place)) == sort(unique(test1$place)))
library(readxl)
LA_cases_by_zipcode <- read_excel("~/Downloads/LA_cases_by_zipcode.xlsx",
col_names = FALSE)
View(LA_cases_by_zipcode)
unique(LA_cases_by_zipcode$...9)
lenght(unique(LA_cases_by_zipcode$...9))
lengh(unique(LA_cases_by_zipcode$...9))
length(unique(LA_cases_by_zipcode$...9))
View(test1)
View(test1)
as.Date(5-27)
as.Date(5.27)
as.Date(5-27-1995)
library(lubridate)
date(5-27-2016)
date("5-27-2016")
as.Date.numeric("5-27-2016")
73/7
74/7
library(readxl)
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
View(LA_cases_by_zipcode)
latimes.place.totals <- read.csv("~/Downloads/MDP_summer/Covid-19_Risk_Umich_ZJU/data/latimes-place-totals.csv")
View(latimes.place.totals)
install.packages("readxl")
library(readxl)
latimes.place.totals <- read.csv("data/latimes-place-totals.csv")
getwd
getwd()
latimes.place.totals <- read.csv("/data/latimes-place-totals.csv")
latimes.place.totals <- read.csv("data/latimes-place-totals.csv")
latimes.place.totals <- read.csv("~/Downloads/MDP_summer/Covid-19_Risk_Umich_ZJU/data/latimes-place-totals.csv")
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
latimes.place.totals <- read.csv("~/Downloads/MDP_summer/Covid-19_Risk_Umich_ZJU/data/latimes-place-totals.csv")
View(latimes.place.totals)
library(readxl)
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
View(LA_cases_by_zipcode)
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
library(readxl)
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
latimes.place.totals <- read.csv("data/latimes-place-totals.csv")
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
latimes.place.totals <- read.csv("data/latimes-place-totals.csv")
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
latimes.place.totals <- read.csv("data/latimes-place-totals.csv")
LA_cases_by_zipcode <- read_excel("data/LA_cases_by_zipcode.xlsx")
